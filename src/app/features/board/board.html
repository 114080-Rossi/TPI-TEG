<div class="board-container">

  <!-- PANEL IZQUIERDO -->
  <div class="side-panel left-info">

    <!-- Bloque: Ronda y Turno -->
    <div class="player-label">
      <strong>Jugador actual:</strong> {{ myPlayerName }}
    </div>

    <div class="info-section">
      <p><strong>Round Number:</strong> 3</p>
    </div>

    <div class="info-section">
      <p><strong>Turn Of:</strong>{{ myPlayerName }}</p>
    </div>

    <!-- Cronómetro -->
    <div class="timer-box">
      <i class="fa-solid fa-hourglass-half"></i>
      <span>{{ secondsLeft }}</span>s
    </div>

    <!-- Lista de jugadores -->

    <div class="info-section">
      <h3 class="players-title">Players</h3>
      <ul class="players-list">
        <li *ngFor="let player of playersdto" class="player-row">
          <span class="cl-id">{{ player.playerId }}</span>&nbsp;
          <span class="cl-colour">{{ player.color }}</span>
        </li>
      </ul>
    </div>

    <!--
    <ul class="player-list">
      Lista de jugadores:
      <li *ngFor="let color of playersNames">
        <i class="fa fa-user"></i> {{ color }}
      </li>
    </ul>
-->

  </div>

  <!-- MAPA -->
  <div class="map-panel">
    <h2>TEG</h2>
    <p style="text-align: center;"><strong>Current Phase:</strong> {{ phaseOrder[currentPhaseIndex] }}</p>

    <div class="map-wrapper">
      <!--  width/height se eliminan del SVG, el tamaño lo da CSS -->
      <object
        id="svgMap"
        class="map-svg"
        type="image/svg+xml"
        data="assets/board-TEG_final.svg">
      </object>
    </div>
  </div>

  <!-- PANEL DERECHO -->
  <div class="side-panel info-panel">

    <div class="objective-box">
      <h3>Objective</h3>
      <p>{{ objective }}</p>
    </div>

    <div class="country-list-wrapper">
      <h3 class="country-title">Countries</h3>
      <ul class="country-list">
        <li *ngFor="let country of countries" class="country-row">
          <span class="country-dot"
                [style.background]="getCountryColor(country.id)"
                [title]="getCountryOwnerName(country.id)">
          </span>
          <span class="cl-name">{{ country.name }}</span>
          <span class="cl-armies">{{ country.armies }}</span>
        </li>
      </ul>
    </div>

    <div class="action-buttons">
      <button class="action-btn"
              (click)="distributeArmies()"
              [disabled]="armiesLeft === 0 || !buttonsState.assign">
        <i class="fa-solid fa-helmet-safety"></i>
        <span>Distribute</span>
      </button>

      <button class="action-btn" (click)="attack()" [disabled]="!buttonsState.attack">
        <i class="fa-solid fa-crosshairs"></i>
        <span>Attack</span>
      </button>

      <button class="action-btn" (click)="regroup()" [disabled]="!buttonsState.regroup">
        <i class="fa-solid fa-rotate"></i>
        <span>Regroup</span>
      </button>

      <button class="action-btn" (click)="endTurn()">
        <i class="fa-solid fa-thumbs-up"></i>
        <span>End Turn</span>
      </button>

      <button class="action-btn"
              (click)="changePhase()"
              [disabled]="buttonsState.assign && armiesLeft > 0">
        <i class="fa-solid fa-thumbs-up"></i>
        <span>Change Phase</span>
      </button>

    </div>
  </div>
</div>

<!-- MODALES -->
<app-attack-modal
  [countries]="countries"
  [open]="modalAtaqueAbierto"
  (close)="modalAtaqueAbierto = false"
  (confirm)="onAttackConfirm($event)">
</app-attack-modal>

<app-regroup-modal
  [countries]="countries"
  [open]="modalRegroupAbierto"
  (close)="modalRegroupAbierto = false"
  (confirm)="onRegroupConfirm($event)">
</app-regroup-modal>

<app-distribute-armies-modal
  [open]="modalDistributeOpen"
  [countries]="myCountries"
  [armiesLeft]="armiesLeft"
  (close)="modalDistributeOpen = false"
  (confirm)="onDistributeConfirm($event)">
</app-distribute-armies-modal>

<app-confirm-endturn-modal
  [open]="modalConfirmEndTurnOpen"
  (confirm)="onConfirmEndTurn()"
  (cancel)="onCancelEndTurn()">
</app-confirm-endturn-modal>
