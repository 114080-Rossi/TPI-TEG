<div class="modal-overlay" *ngIf="open" (click)="onClose()">

  <!-- Ventana -->
  <div class="modal-window" (click)="$event.stopPropagation()">

    <img ngSrc="assets/images/regroup_new.png"
         alt="Reagrupar"
         class="modal-hero"
         height="1024" width="1024">

    <h3>Regroup Armies</h3>

    <!-- País origen -->
    <label>From:</label>
    <select [(ngModel)]="fromCountryId">
      <option [ngValue]="null" disabled selected>Select origin</option>
      <option *ngFor="let c of countries"
              [ngValue]="c.id"
              [disabled]="c.armies <= 1">
        {{ c.name }}
      </option>
    </select>
    <span *ngIf="fromCountry">
      Current armies: <b>{{ fromCountry.armies }}</b>
    </span>

    <br />

    <!-- País destino -->
    <label>To:</label>
    <select [(ngModel)]="toCountryId" [disabled]="!fromCountryId">
      <option [ngValue]="null" disabled selected>Select target</option>
      <option *ngFor="let c of toCountryOptions" [ngValue]="c.id">
        {{ c.name }}
      </option>
    </select>
    <span *ngIf="toCountry">
      Current armies: <b>{{ toCountry.armies }}</b>
    </span>

    <br />

    <!-- Cantidad a mover -->
    <label>Armies to move:</label>
    <input type="number"
           [(ngModel)]="armies"
           [min]="1"
           [max]="armiesMax"
           [disabled]="!fromCountryId || !toCountryId" />

    <!-- Preview final -->
    <span *ngIf="fromCountry && toCountry">
      <br />
      <span>Armies after regroup:</span><br />
      <b>{{ fromCountry.name }}: {{ armiesFinalOrigen }}</b><br />
      <b>{{ toCountry.name }}: {{ armiesFinalDestino }}</b>
    </span>

    <!-- Botones -->
    <div class="modal-btn-row">
      <button class="modal-btn primary"
              (click)="onConfirm()"
              [disabled]="!fromCountryId || !toCountryId || armies < 1 || armies > armiesMax">
        Confirm
      </button>
      <button class="modal-btn" (click)="onClose()">Cancel</button>
    </div>

  </div>
</div>
